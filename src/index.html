<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEW H.E.R.O.</title>
    
    <!-- Favicon personalizado -->
    <link rel="icon" type="image/x-icon" href="/src/assets/icons/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="/src/assets/icons/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/src/assets/icons/favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/src/assets/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/src/assets/icons/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/src/assets/icons/android-chrome-512x512.png">
    <meta name="theme-color" content="#1f2937">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-900 flex justify-center items-center h-screen overflow-hidden">

    <div id="main-container">
        <!-- Barra de UI con acciones r√°pidas (m√≥vil) - Ahora con hamburguesa -->
        <div id="right-ui" class="text-sm flex items-center justify-end gap-4" style="display: none;">
            <button id="hamburger-btn-mobile" class="hamburger-btn-mobile" aria-label="Men√∫">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>

            <!-- Contenedor Canvas con barras UI superpuestas -->
            <div class="canvas-wrapper">
                <!-- Barra Superior (superpuesta) -->
                <div id="game-ui" class="text-base" style="display: none;">
                    <div class="flex items-center gap-2">
                        <img id="hero-logo" alt="Hero" style="display: none; image-rendering: pixelated;">
                        <span class="text-lg font-bold">LEVEL: <span id="level-count">1</span></span>
                    </div>
                    <span class="text-lg font-bold">SCORE: <span id="score-count">0</span></span>
                    <span id="volume-toggle" class="volume-toggle" aria-label="Volumen">SOUND: ON</span>
                    
                    <button id="hamburger-btn" class="hamburger-btn" aria-label="Men√∫">
                    </button>
                </div>
                
                <!-- Men√∫ Hamburguesa Desplegable -->
                <div id="hamburger-menu" class="hamburger-menu hidden">
                    <button id="pause-resume-btn" class="menu-item">Pausar</button>
                    <button id="restart-game-btn" class="menu-item">Reiniciar</button>
                    <button id="back-to-menu-btn-game" class="menu-item">Volver al Men√∫</button>
                    <button id="resume-editor-btn-menu" class="menu-item hidden">Volver al Editor</button>
                </div>
                
                <!-- Canvas del Juego / Editor -->
                <canvas id="gameCanvas" width="1440" height="900"></canvas>
                
                <!-- Barra Inferior (superpuesta) -->
                <div id="bottom-ui" class="text-base" style="display: none;">
                    <div class="flex items-center gap-3">
                        <span class="text-lg font-bold hidden sm:inline">LIVES:</span>
                        <div id="lives-count" class="flex gap-1"></div>
                    </div>
                    <div class="flex items-center gap-3">
                        <span class="text-lg font-bold hidden sm:inline">POWER:</span>
                        <div class="w-96 h-8 bg-gray-700 border-2 border-white energy-bar-container"><div id="energy-bar" class="h-full bg-yellow-400 transition-all duration-300 ease-in-out"></div></div>
                    </div>
                    <div class="flex items-center gap-3">
                        <span class="text-lg font-bold hidden sm:inline">TNT:</span>
                        <div id="bombs-count" class="flex gap-1"></div>
                    </div>
                </div>
            </div>

        <!-- Panel del Editor -->
        <div id="editor-panel" class="editor-panel flex-col gap-2 w-72 hidden bg-gray-800">
                <h2 class="text-center text-lg mb-2">EDITOR</h2>
                <button id="play-test-btn" class="w-full bg-green-600 hover:bg-green-700 p-2 border-2 border-white mb-4 text-xs">Jugar Nivel</button>
                
                <div id="tile-palette" class="flex flex-col gap-4">
                    <!-- Tiles se agregar√°n din√°micamente aqu√≠ -->
                </div>


                <div class="mt-4 border-t-2 border-gray-500 pt-4">
                    <h3 class="text-center text-md my-2">Edici√≥n</h3>
                    <div class="grid grid-cols-2 gap-2">
                        <button id="undo-btn" class="w-full bg-gray-600 hover:bg-gray-700 p-2 border-2 border-white text-xs">‚Ü∂ Deshacer</button>
                        <button id="redo-btn" class="w-full bg-gray-600 hover:bg-gray-700 p-2 border-2 border-white text-xs">‚Ü∑ Rehacer</button>
                    </div>
                    <div class="mt-2">
                        <button id="duplicate-row-btn" class="w-full bg-blue-600 hover:bg-blue-700 p-2 border-2 border-white text-xs">üìã Duplicar Fila</button>
                        <button id="delete-row-btn" class="w-full bg-red-600 hover:bg-red-700 p-2 border-2 border-white text-xs mt-1">üóëÔ∏è Borrar Fila</button>
                    </div>
                </div>

                <div class="mt-4 border-t-2 border-gray-500 pt-4">
                    <h3 class="text-center text-md my-2">Niveles</h3>
                    <div class="flex items-center gap-2">
                        <label for="level-selector" class="text-sm">Cargar:</label>
                        <select id="level-selector" class="flex-grow bg-gray-700 border-2 border-white p-1 text-sm"></select>
                    </div>
                        <button id="load-level-btn" class="w-full bg-blue-600 hover:bg-blue-700 p-2 border-2 border-white text-xs">Restaurar</button>
                        <button id="save-level-btn" class="w-full bg-yellow-600 hover:bg-yellow-700 p-2 border-2 border-white text-xs">Guardar en sesi√≥n</button>
                    <button id="add-level-btn" class="w-full bg-purple-600 hover:bg-purple-700 p-2 border-2 border-white mt-2 text-xs">‚ûï Nuevo Nivel</button>
                    <button id="generate-level-btn" class="w-full bg-green-600 hover:bg-green-700 p-2 border-2 border-white text-xs">Generar Nivel</button>
                    <button id="save-all-btn" class="w-full bg-red-700 hover:bg-red-800 p-2 border-2 border-white mt-2 text-xs">Guardar en Archivo</button>
                </div>
                
                 <button id="back-to-menu-btn" class="w-full bg-gray-600 hover:bg-gray-700 p-2 border-2 border-white mt-4 text-xs">Volver al Men√∫</button>
            </div>
        </div>

        <!-- Modal de Confirmaci√≥n -->
        <div id="confirmation-modal" class="hidden absolute inset-0 bg-black bg-opacity-80 flex flex-col justify-center items-center text-center z-20">
            <div class="bg-gray-800 p-8 border-4 border-white">
                <h2 id="modal-title" class="text-2xl mb-6">¬øEst√°s seguro?</h2>
                <p id="modal-text" class="mb-8">Esto guardar√° el nivel actual y todos los cambios en el archivo JSON.</p>
                <div class="flex justify-center gap-4">
                    <button id="confirm-save-btn" class="bg-green-600 hover:bg-green-700 p-3 w-32 border-2 border-white">Confirmar</button>
                    <button id="cancel-save-btn" class="bg-gray-600 hover:bg-gray-700 p-3 w-32 border-2 border-white">Cancelar</button>
                </div>
            </div>
        </div>

        <!-- Modal de Confirmaci√≥n de Salida -->
        <div id="exit-modal" class="hidden absolute inset-0 bg-black bg-opacity-80 flex flex-col justify-center items-center text-center z-40">
            <div class="bg-gray-800 p-8 border-4 border-white max-w-lg">
                <h2 id="exit-title" class="text-2xl mb-6">Confirmar acci√≥n</h2>
                <p id="exit-text" class="mb-8 text-lg whitespace-pre-line">¬øSeguro que deseas continuar?</p>
                <div class="flex justify-center gap-4">
                    <button id="exit-confirm-btn" class="bg-red-600 hover:bg-red-700 p-3 w-32 border-2 border-white">S√≠</button>
                    <button id="exit-cancel-btn" class="bg-gray-600 hover:bg-gray-700 p-3 w-32 border-2 border-white">No</button>
                </div>
            </div>
        </div>

        <!-- Modal de Notificaci√≥n -->
        <div id="notification-modal" class="hidden absolute inset-0 bg-black bg-opacity-80 flex flex-col justify-center items-center text-center z-30">
            <div class="bg-gray-800 p-8 border-4 border-white max-w-lg">
                <h2 id="notification-title" class="text-2xl mb-6">Notificaci√≥n</h2>
                <p id="notification-message" class="mb-8 text-lg whitespace-pre-line"></p>
                <div class="flex justify-center">
                    <button id="notification-ok-btn" class="bg-blue-600 hover:bg-blue-700 p-3 w-32 border-2 border-white">Aceptar</button>
                </div>
            </div>
        </div>

        <!-- Pantalla de Mensajes (Inicio / Game Over) -->
        <div id="message-overlay" class="absolute inset-0 bg-black bg-opacity-70 flex flex-col justify-center items-center text-center" style="padding-top: 56vh;">
            <p id="message-text" class="text-sm opacity-90"></p>
            <div class="flex gap-4 mt-6">
                <button id="start-game-btn" class="bg-green-600 hover:bg-green-700 p-3 border-2 border-white">Empezar Juego</button>
                <button id="level-editor-btn" class="bg-indigo-600 hover:bg-indigo-700 p-3 border-2 border-white">Editar Niveles</button>
                <button id="retry-btn" class="bg-yellow-600 hover:bg-yellow-700 p-3 border-2 border-white hidden">Volver a jugar</button>
            </div>
        </div>

        <!-- Controles M√≥viles -->
        <div id="mobile-controls" class="hidden">
            <div id="directional-buttons">
                <div class="button-row">
                    <button id="btn-up-left" class="directional-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transform: rotate(-45deg);">
                            <path d="M12 19V5M5 12l7-7 7 7"/>
                        </svg>
                    </button>
                    <button id="btn-up" class="directional-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M12 19V5M5 12l7-7 7 7"/>
                        </svg>
                    </button>
                    <button id="btn-up-right" class="directional-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="transform: rotate(45deg);">
                            <path d="M12 19V5M5 12l7-7 7 7"/>
                        </svg>
                    </button>
                </div>
                <div class="button-row">
                    <button id="btn-left" class="directional-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                    </button>
                    <button id="btn-right" class="directional-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </button>
                </div>
            </div>
            <div id="joystick-zone">

            </div>
            <div id="action-zone">
                <button id="shoot-btn" class="action-button">L√ÅSER</button>
                <button id="bomb-btn" class="action-button">BOMBA</button>
            </div>
        </div>
    </div>
</body>
</html>
